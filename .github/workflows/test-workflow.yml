name: Manual test workflow

on:
  workflow_dispatch:

jobs:
  windows-smoke-test:
    runs-on: windows-latest
    defaults:
      run:
        working-directory: hello-world
        shell: bash        
        
    steps:
      - uses: actions/checkout@v3
      - uses: actions/setup-node@v3
        with:
          node-version: '18'    

      - name: NPM install
        run: |
          npm install
          
      - name: Run dev server
        run: |
          npm run start &
          
      - name: Hit dev server
        run: |
          curl http://localhost:3000/
          curl http://localhost:3000/partial/Cars
          
          curl http://localhost:3000/should/fail/does/it/error/action
          echo ""
          echo "OK, I think?"

